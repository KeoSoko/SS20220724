üß≠ SIMPLE SLIPS ‚Äî ADMIN /COMMAND-CENTER (AI + METRICS)

Purpose:
Create an internal Admin Command Center that gives operators instant visibility, diagnosis, and recovery controls to prevent user loss.

This is an operational dashboard, not analytics for investors.

üîê AUTHORIZATION (MANDATORY)

Route is admin-only

User must have isAdmin = true

Non-admin access ‚Üí 403 Forbidden

All admin actions are audited

üß± ROUTING & NAMING (IMPORTANT)
Admin Page URL
/command-center

API Namespace
/api/admin/...


Use Command Center terminology consistently in:

route names

UI headings

logs

comments

üß± BACKEND ‚Äî REQUIRED ENDPOINTS
1Ô∏è‚É£ Admin User Search (with Metrics)
GET /api/admin/users/search?query=


Search by:

email

username

userId

Return summary + metrics:

{
  "id": 123,
  "email": "user@email.com",
  "username": "user123",
  "createdAt": "...",
  "lastLogin": "...",
  "loginCount": 42,
  "isEmailVerified": true,

  "subscription": {
    "status": "trial | active | expired | cancelled",
    "trialEndDate": "...",
    "nextBillingDate": "..."
  },

  "usage": {
    "totalReceipts": 87,
    "receiptsLast30Days": 12,
    "lastReceiptAt": "...",
    "ocrUsageCount": 65
  }
}

2Ô∏è‚É£ Admin User Detail (Deep Dive)
GET /api/admin/users/:userId


Return:

User record

Subscription record

Usage metrics

Billing timeline

Payment transactions

Email verification state

Usage metrics must include:

total logins

last login timestamp

total receipts uploaded

receipts uploaded in last 7 / 30 days

OCR usage count

3Ô∏è‚É£ Admin Recovery Actions
POST /api/admin/users/:userId/actions


Supported actions:

verify_email

resend_verification_email

restart_trial

activate_subscription

cancel_subscription

reconcile_payment

Rules:

All actions are idempotent

All actions log to billing_events

Include adminUserId and optional reason

üìä SYSTEM-LEVEL METRICS (TOP OF COMMAND CENTER)

Add a System Health Panel showing:

Total users

Unverified users

Users stuck on trial > 30 days

Failed subscriptions (last 24h / 7d)

Failed webhooks (last 24h)

OCR failures

Email delivery failures

These are counts only, no charts.

ü§ñ AI FEATURES (ADVISORY ONLY)
4Ô∏è‚É£ AI User Diagnosis
POST /api/admin/ai/analyze-user


Input:

user record

subscription

usage metrics

last 20 billing_events

last 10 payment_transactions

Output (JSON only):

{
  "diagnosis": "...",
  "rootCause": "...",
  "riskLevel": "low | medium | high",
  "recommendedActions": [
    {
      "action": "restart_trial | reconcile_payment | verify_email",
      "reason": "..."
    }
  ],
  "confidence": "high"
}


‚ö†Ô∏è AI must never execute actions ‚Äî advisory only.

5Ô∏è‚É£ AI Timeline Summary
POST /api/admin/ai/summarize-events


Summarises recent billing + usage events into:

what happened

what failed

current state

üñ•Ô∏è FRONTEND ‚Äî COMMAND CENTER UI

Route:

/command-center


Sections:

AÔ∏è‚É£ Global Health Snapshot (Top)

Red/Amber/Green counts

Clickable filters

BÔ∏è‚É£ User Search & Metrics Card

Shows:

Email / username

Subscription state

Login count

Last login

Receipt usage

OCR usage

CÔ∏è‚É£ AI Insight Panel

Diagnosis

Risk level

Recommended actions (buttons, not auto-run)

DÔ∏è‚É£ Event Timeline

billing_events

payment_transactions

webhook events

Chronological, readable, filterable.

üßæ AUDIT & SAFETY

Every admin action logs:

admin user ID

action

timestamp

reason

No destructive action without confirmation

No AI auto-execution

üö´ CONSTRAINTS (VERY IMPORTANT)

‚ùå No charts

‚ùå No role system

‚ùå No exports

‚ùå No schema redesigns

‚ùå No background AI automation

‚úÖ Read-only AI insights

‚úÖ Deterministic metrics

‚úÖ SUCCESS CRITERIA

Admin can answer in under 30 seconds:

Has this user logged in?

Have they used the product?

Did they upload receipts?

Did they pay?

Where did it break?

How do I fix it now?

Without logs. Without DB access. Without guessing.